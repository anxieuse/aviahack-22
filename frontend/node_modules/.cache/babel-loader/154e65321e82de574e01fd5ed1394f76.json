{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar filterList_1 = __importDefault(require(\"./filterList\"));\nvar getObjectDeepKeyValue_1 = __importDefault(require(\"./getObjectDeepKeyValue\"));\nvar isType_1 = require(\"./isType\");\nvar defaultSearchOptions = {\n  by: \"0\",\n  caseInsensitive: false,\n  everyWord: false,\n  minCharactersCount: 3,\n  term: \"\"\n};\nvar defaultFilterByFn = function (item, term, caseInsensitive, by) {\n  if (caseInsensitive === void 0) {\n    caseInsensitive = false;\n  }\n  if (by === void 0) {\n    by = \"0\";\n  }\n  var keyValue = (0, isType_1.isObject)(item) || (0, isType_1.isArray)(item) ? (0, getObjectDeepKeyValue_1.default)(item, by) : item;\n  var value = caseInsensitive ? \"\".concat(keyValue).toLowerCase() : \"\".concat(keyValue);\n  if ((0, isType_1.isArray)(term)) {\n    return term.some(function (t) {\n      t = caseInsensitive ? t.toLowerCase() : t.trim();\n      return value.search(t.trim()) >= 0;\n    });\n  }\n  term = caseInsensitive ? term.toLowerCase() : term;\n  return value.search(term.trim()) >= 0;\n};\nvar getFilterByFn = function (term, by, caseInsensitive) {\n  if (caseInsensitive === void 0) {\n    caseInsensitive = false;\n  }\n  if ((0, isType_1.isFunction)(by)) {\n    if ((0, isType_1.isArray)(term)) {\n      return function (item, idx) {\n        return term.some(function (t) {\n          t = caseInsensitive ? t.toLowerCase() : t;\n          return by(item, t.trim(), idx);\n        });\n      };\n    }\n    term = caseInsensitive ? term.toLowerCase() : term;\n    return function (item, idx) {\n      return by(item, term.trim(), idx);\n    };\n  }\n  if ((0, isType_1.isArray)(by)) {\n    return function (item) {\n      return by.some(function (key) {\n        var keyCaseInsensitive = (0, isType_1.isObject)(key) && key.caseInsensitive !== undefined ? key.caseInsensitive : caseInsensitive;\n        var keyBy = ((0, isType_1.isObject)(key) ? key.key : key) || \"0\";\n        return defaultFilterByFn(item, term, keyCaseInsensitive, keyBy);\n      });\n    };\n  }\n  return function (item) {\n    return defaultFilterByFn(item, term, caseInsensitive, by || \"0\");\n  };\n};\nvar searchList = function (list, options) {\n  if ((0, isType_1.isNilOrEmpty)(options)) {\n    options = defaultSearchOptions;\n  }\n  if (list.length > 0) {\n    var term = options.term,\n      _a = options.by,\n      by = _a === void 0 ? \"0\" : _a,\n      _b = options.minCharactersCount,\n      minCharactersCount_1 = _b === void 0 ? 0 : _b;\n    if (term && by && term.length >= minCharactersCount_1) {\n      var everyWord = options.everyWord,\n        caseInsensitive = options.caseInsensitive;\n      if (everyWord) {\n        var termWords = term.trim().split(/\\s+/).filter(function (word) {\n          return word.length >= minCharactersCount_1;\n        });\n        if (termWords.length > 0) {\n          var filterByFn = getFilterByFn(Array.from(new Set(termWords)), by, caseInsensitive);\n          return (0, filterList_1.default)(list, filterByFn);\n        }\n      } else {\n        var filterByFn = getFilterByFn(term, by, caseInsensitive);\n        return (0, filterList_1.default)(list, filterByFn);\n      }\n    }\n  }\n  return list;\n};\nexports.default = searchList;","map":{"version":3,"mappings":"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","names":["defaultSearchOptions","by","caseInsensitive","everyWord","minCharactersCount","term","defaultFilterByFn","item","keyValue","value","toLowerCase","some","t","trim","search","getFilterByFn","idx","key","keyCaseInsensitive","undefined","keyBy","searchList","list","options","length","_a","_b","minCharactersCount_1","termWords","split","filter","word","filterByFn","Array","from","Set","exports"],"sources":["../../src/___utils/searchList.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}
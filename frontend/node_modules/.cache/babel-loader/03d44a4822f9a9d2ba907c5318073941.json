{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar getObjectDeepKeyValue_1 = __importDefault(require(\"./getObjectDeepKeyValue\"));\nvar isType_1 = require(\"./isType\");\nvar reverseList_1 = __importDefault(require(\"./reverseList\"));\nvar defaultGroupOptions = {\n  by: \"\",\n  limit: 0,\n  reversed: false\n};\nvar handleGroupReverse = function (groupedLists, reverse) {\n  if (reverse === void 0) {\n    reverse = false;\n  }\n  if (reverse && (0, isType_1.isBoolean)(reverse)) {\n    return groupedLists.map(function (group) {\n      return (0, reverseList_1.default)(group);\n    });\n  }\n  return groupedLists;\n};\nvar groupList = function (list, options) {\n  if (options === void 0) {\n    options = defaultGroupOptions;\n  }\n  var groupLabels = [];\n  if ((0, isType_1.isNilOrEmpty)(options)) {\n    options = defaultGroupOptions;\n  }\n  var groupBy = options.by,\n    limit = options.limit;\n  if (groupBy && ((0, isType_1.isFunction)(groupBy) || (0, isType_1.isString)(groupBy))) {\n    var groupedList = list.reduce(function (prevList, item, idx) {\n      var groupLabel = (0, isType_1.isFunction)(groupBy) ? groupBy(item, idx) : (0, getObjectDeepKeyValue_1.default)(item, groupBy);\n      if (!prevList[groupLabel]) {\n        prevList[groupLabel] = [];\n      }\n      if (!limit || limit > 0 && prevList[groupLabel].length < limit) {\n        prevList[groupLabel].push(item);\n      }\n      return prevList;\n    }, {});\n    // using Set here so the order is preserved and prevent duplicates\n    groupLabels = Array.from(new Set(Object.keys(groupedList)));\n    return {\n      groupLabels: groupLabels,\n      groupLists: handleGroupReverse(Object.values(groupedList), options.reversed)\n    };\n  }\n  if (limit && (0, isType_1.isNumber)(limit) && limit > 0) {\n    var groupLabel_1 = 1;\n    var groupLists = list.reduce(function (prevList, item) {\n      if (!prevList[groupLabel_1]) {\n        prevList[groupLabel_1] = [];\n      }\n      prevList[groupLabel_1].push(item);\n      if (prevList[groupLabel_1].length === limit) {\n        groupLabel_1 += 1;\n      }\n      return prevList;\n    }, {});\n    groupLabels = Array.from(new Set(Object.keys(groupLists)));\n    return {\n      groupLabels: groupLabels,\n      groupLists: handleGroupReverse(Object.values(groupLists), options.reversed)\n    };\n  }\n  return {\n    groupLabels: groupLabels,\n    groupLists: handleGroupReverse([list], options.reversed)\n  };\n};\nexports.default = groupList;","map":{"version":3,"mappings":";;;;;;;;;;AAAA;AACA;AAOA;AAQA,IAAMA,mBAAmB,GAA0B;EACjDC,EAAE,EAAE,EAAE;EACNC,KAAK,EAAE,CAAC;EACRC,QAAQ,EAAE;CACX;AAMD,IAAMC,kBAAkB,GAAG,UAAIC,YAAmB,EAAEC,OAAe;EAAf;IAAAA,eAAe;EAAA;EACjE,IAAIA,OAAO,IAAI,sBAAS,EAACA,OAAO,CAAC,EAAE;IACjC,OAAOD,YAAY,CAACE,GAAG,CAAC,UAACC,KAAK;MAAK,gCAAW,EAACA,KAAK,CAAC;IAAlB,CAAkB,CAAC;;EAGxD,OAAOH,YAAY;AACrB,CAAC;AAED,IAAMI,SAAS,GAAG,UAChBC,IAAS,EACTC,OAAoD;EAApD;IAAAA,6BAAoD;EAAA;EAEpD,IAAIC,WAAW,GAAU,EAAE;EAE3B,IAAI,yBAAY,EAACD,OAAO,CAAC,EAAE;IACzBA,OAAO,GAAGX,mBAAmB;;EAGvB,IAAIa,OAAO,GAAYF,OAAO,GAAnB;IAAET,KAAK,GAAKS,OAAO,MAAZ;EAE1B,IAAIE,OAAO,KAAK,uBAAU,EAACA,OAAO,CAAC,IAAI,qBAAQ,EAACA,OAAO,CAAC,CAAC,EAAE;IACzD,IAAMC,WAAW,GAAmCJ,IAAI,CAACK,MAAM,CAC7D,UAACC,QAAwC,EAAEC,IAAO,EAAEC,GAAW;MAC7D,IAAMC,UAAU,GAAQ,uBAAU,EAACN,OAAO,CAAC,GACtCA,OAA8C,CAACI,IAAI,EAAEC,GAAG,CAAC,GAC1D,mCAAqB,EAACD,IAAI,EAAEJ,OAAiB,CAAC;MAElD,IAAI,CAACG,QAAQ,CAACG,UAAU,CAAC,EAAE;QACzBH,QAAQ,CAACG,UAAU,CAAC,GAAG,EAAE;;MAG3B,IAAI,CAACjB,KAAK,IAAKA,KAAK,GAAG,CAAC,IAAIc,QAAQ,CAACG,UAAU,CAAC,CAACC,MAAM,GAAGlB,KAAM,EAAE;QAChEc,QAAQ,CAACG,UAAU,CAAC,CAACE,IAAI,CAACJ,IAAI,CAAC;;MAGjC,OAAOD,QAAQ;IACjB,CAAC,EACD,EAAE,CACH;IAED;IACAJ,WAAW,GAAGU,KAAK,CAACC,IAAI,CAAC,IAAIC,GAAG,CAACC,MAAM,CAACC,IAAI,CAACZ,WAAW,CAAC,CAAC,CAAC;IAE3D,OAAO;MACLF,WAAW;MACXe,UAAU,EAAEvB,kBAAkB,CAC5BqB,MAAM,CAACG,MAAM,CAACd,WAAW,CAAC,EAC1BH,OAAO,CAACR,QAAQ;KAEnB;;EAEH,IAAID,KAAK,IAAI,qBAAQ,EAACA,KAAK,CAAC,IAAIA,KAAK,GAAG,CAAC,EAAE;IACzC,IAAI2B,YAAU,GAAG,CAAC;IAClB,IAAMF,UAAU,GAAmCjB,IAAI,CAACK,MAAM,CAC5D,UAACC,QAAwC,EAAEC,IAAO;MAChD,IAAI,CAACD,QAAQ,CAACa,YAAU,CAAC,EAAE;QACzBb,QAAQ,CAACa,YAAU,CAAC,GAAG,EAAE;;MAG3Bb,QAAQ,CAACa,YAAU,CAAC,CAACR,IAAI,CAACJ,IAAI,CAAC;MAE/B,IAAID,QAAQ,CAACa,YAAU,CAAC,CAACT,MAAM,KAAKlB,KAAK,EAAE;QACzC2B,YAAU,IAAI,CAAC;;MAGjB,OAAOb,QAAQ;IACjB,CAAC,EACD,EAAE,CACH;IAEDJ,WAAW,GAAGU,KAAK,CAACC,IAAI,CAAC,IAAIC,GAAG,CAACC,MAAM,CAACC,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC;IAE1D,OAAO;MACLf,WAAW;MACXe,UAAU,EAAEvB,kBAAkB,CAC5BqB,MAAM,CAACG,MAAM,CAACD,UAAU,CAAC,EACzBhB,OAAO,CAACR,QAAQ;KAEnB;;EAGH,OAAO;IACLS,WAAW;IACXe,UAAU,EAAEvB,kBAAkB,CAAC,CAACM,IAAI,CAAC,EAAEC,OAAO,CAACR,QAAQ;GACxD;AACH,CAAC;AAED2B,kBAAerB,SAAS","names":["defaultGroupOptions","by","limit","reversed","handleGroupReverse","groupedLists","reverse","map","group","groupList","list","options","groupLabels","groupBy","groupedList","reduce","prevList","item","idx","groupLabel","length","push","Array","from","Set","Object","keys","groupLists","values","groupLabel_1","exports"],"sources":["../../src/___utils/groupList.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}